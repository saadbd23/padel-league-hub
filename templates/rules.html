
{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
  <div class="bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl p-8">
    <h1 class="text-4xl font-bold text-gray-900 mb-8 text-center">Tournament Rules</h1>
    
    <!-- Ladder Rules (Expanded by Default) -->
    <div class="mb-4 border border-gray-200 rounded-lg">
      <button onclick="toggleAccordion('ladder')" class="w-full px-6 py-4 text-left bg-gradient-to-r from-purple-50 to-indigo-50 hover:from-purple-100 hover:to-indigo-100 transition-all rounded-lg flex justify-between items-center">
        <span class="text-xl font-bold text-purple-700">ü™ú Ladder Tournament Rules</span>
        <svg id="ladder-icon" class="w-6 h-6 text-purple-600 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
        </svg>
      </button>
      <div id="ladder-content" class="px-6 py-4 bg-white">
        <div class="space-y-4 text-gray-700">
          <h3 class="text-lg font-semibold text-purple-700">Court Booking & Payment</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li><strong>Challengers must coordinate the booking</strong> - After contacting the opponent team and agreeing on a date and time, the <strong>challenging team</strong> is responsible for booking the courts</li>
            <li>Court fees are shared equally amongst all 4 players and must be <strong>settled before getting on the court</strong> with the challengers</li>
            <li>The league does not provide court bookings - teams must arrange and pay directly with their chosen venue</li>
            <li>Keep your booking confirmation to present on match day</li>
          </ul>

          <h3 class="text-lg font-semibold text-purple-700 mt-6">Challenge System</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Teams can challenge opponents up to 3 ranks above them</li>
            <li>Challenged teams have 48 hours to accept or reject the challenge</li>
            <li>If not responded within 48 hours, challenger wins by default and ranks are swapped</li>
            <li>Once accepted, teams have 7 days to complete the match</li>
          </ul>

          <h3 class="text-lg font-semibold text-purple-700 mt-6">Match Format</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Best of 3 sets format</li>
            <li>First to 6 games wins a set</li>
            <li>If tied 6-6, play a tiebreak to 7 points (win by 2)</li>
            <li>If sets are tied 1-1, play a super tiebreak to 10 points (win by 2)</li>
          </ul>

          <h3 class="text-lg font-semibold text-purple-700 mt-6">Ranking System</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Winner takes the loser's rank, loser drops one position</li>
            <li>All teams between them shift accordingly</li>
            <li>Teams locked in challenges cannot be challenged by others</li>
          </ul>

          <h3 class="text-lg font-semibold text-purple-700 mt-6">Holiday Mode</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Teams can activate holiday mode to avoid challenges</li>
            <li>2-week grace period with no rank penalties</li>
            <li>After grace period: 1 rank penalty per week</li>
            <li>Cannot challenge or be challenged while on holiday</li>
          </ul>

          <h3 class="text-lg font-semibold text-purple-700 mt-6">Activity Requirements</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Minimum 2 matches per month required</li>
            <li>Inactivity penalty: 3 ranks down if requirement not met</li>
            <li>Teams on holiday mode are exempt from activity requirements</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- League Rules (Collapsed) -->
    <div class="mb-4 border border-gray-200 rounded-lg">
      <button onclick="toggleAccordion('league')" class="w-full px-6 py-4 text-left bg-gray-50 hover:bg-gray-100 transition-all rounded-lg flex justify-between items-center">
        <span class="text-xl font-bold text-gray-700">üèÜ Swiss League Rules</span>
        <svg id="league-icon" class="w-6 h-6 text-gray-600 transform rotate-[-90deg] transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
        </svg>
      </button>
      <div id="league-content" class="hidden px-6 py-4 bg-white">
        <div class="space-y-4 text-gray-700">
          <h3 class="text-lg font-semibold text-gray-700">Format</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Swiss system: 5 rounds, followed by playoffs</li>
            <li>Teams paired based on current standings each round</li>
            <li>Top 8 teams advance to single-elimination playoffs</li>
          </ul>

          <h3 class="text-lg font-semibold text-gray-700 mt-6">Scoring</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Win: 3 points</li>
            <li>Draw: 1 point</li>
            <li>Loss: 0 points</li>
            <li>Tiebreakers: Sets difference ‚Üí Games difference ‚Üí Head-to-head</li>
          </ul>

          <h3 class="text-lg font-semibold text-gray-700 mt-6">Match Deadlines</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Matches must be completed by Sunday 23:59 of the round week</li>
            <li>Reschedules allowed (max 2 per team) with admin approval</li>
            <li>Makeup matches deadline: Wednesday 23:59 of following week</li>
            <li>Late completion results in automatic walkover to opponent</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Americano Tournament Rules (Collapsed) -->
    <div class="mb-4 border border-gray-200 rounded-lg">
      <button onclick="toggleAccordion('americano')" class="w-full px-6 py-4 text-left bg-gray-50 hover:bg-gray-100 transition-all rounded-lg flex justify-between items-center">
        <span class="text-xl font-bold text-gray-700">üéæ Americano Tournament Rules</span>
        <svg id="americano-icon" class="w-6 h-6 text-gray-600 transform rotate-[-90deg] transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
        </svg>
      </button>
      <div id="americano-content" class="hidden px-6 py-4 bg-white">
        <div class="space-y-4 text-gray-700">
          <h3 class="text-lg font-semibold text-gray-700">Format</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Monthly tournament for free agents</li>
            <li>Partners rotate each round - play with everyone</li>
            <li>Multiple rounds with different partner combinations</li>
            <li>Fun, social format to meet other players</li>
          </ul>

          <h3 class="text-lg font-semibold text-gray-700 mt-6">Points-Based Scoring</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Each match is played to a fixed number of points (16, 24, or 32) OR a time limit (10 or 20 minutes) - <strong>whichever comes first</strong></li>
            <li>Each ball won = 1 point (no traditional tennis scoring)</li>
            <li>Serve rotates every 2 or 4 serves between teams (set by admin)</li>
            <li>Points are added to each player individually based on their team's score</li>
            <li><strong>Example 1</strong>: 24-point match ends when first team reaches 24 (e.g., 24-18)</li>
            <li><strong>Example 2</strong>: 32-point / 20-min match - time expires at 15-12 (only 27 points played)</li>
          </ul>

          <h3 class="text-lg font-semibold text-gray-700 mt-6">Individual Scoring Examples</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Match 1 (32 pts/20 min): You score 18, opponents score 14 ‚Üí You get 18 points</li>
            <li>Match 2 (24 pts/10 min): You score 10, opponents score 8 ‚Üí You get 10 points (time expired)</li>
            <li>Your total after 2 matches: 18 + 10 = 28 points</li>
            <li>Winner = player with most total points after all matches</li>
          </ul>

          <h3 class="text-lg font-semibold text-gray-700 mt-6">Ladder Qualification</h3>
          <ul class="list-disc pl-6 space-y-2">
            <li>Top 50% of finishers eligible to form ladder teams</li>
            <li>Admin assists with partner pairing after tournament</li>
            <li>New teams join ladder at bottom rank</li>
            <li>Excellent opportunity to find compatible partners!</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- General Match Play Rules -->
    <div class="mt-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border-2 border-blue-300 shadow-lg">
      <h3 class="text-2xl font-bold text-blue-900 mb-6 flex items-center gap-2">
        <span>‚ö†Ô∏è</span>
        <span>General Match Play Rules</span>
        <span class="text-sm font-normal text-blue-700">(Applies to Both League & Ladder)</span>
      </h3>
      
      <div class="space-y-6">
        <!-- Match Format -->
        <div class="bg-white p-4 rounded-lg shadow-sm">
          <h4 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
            <span class="text-2xl">üéæ</span>
            <span>Match Format</span>
          </h4>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            <li><strong>Best of 3 Sets:</strong> First team to win 2 sets wins the match</li>
            <li><strong>Set Format:</strong> First to 6 games wins the set (must win by 2 games if 5-5)</li>
            <li><strong>Tiebreak at 6-6:</strong> Play tiebreak to 7 points (must win by 2)</li>
            <li><strong>Super Tiebreak (if needed):</strong> If sets are 1-1, play super tiebreak to 10 points (must win by 2)</li>
            <li><strong>Scoring:</strong> Traditional tennis scoring (15-30-40-Game)</li>
          </ul>
        </div>

        <!-- Court Booking & Scheduling -->
        <div class="bg-white p-4 rounded-lg shadow-sm">
          <h4 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
            <span class="text-2xl">üìÖ</span>
            <span>Court Booking & Scheduling</span>
          </h4>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            <li><strong>Coordinate Through Dashboard:</strong> Use your team dashboard to propose and confirm match times</li>
            <li><strong>Contact Opponents:</strong> Exchange contact info through secure team pages only</li>
            <li><strong>Book in Advance:</strong> Recommended to book courts at least 2-3 days ahead</li>
            <li><strong>Court Assignment:</strong> Most venues assign courts on arrival (bring booking confirmation)</li>
            <li><strong>Reschedules:</strong> Must be approved by admin (limited to 2 per team in league)</li>
          </ul>
        </div>

        <!-- Score Submission -->
        <div class="bg-white p-4 rounded-lg shadow-sm">
          <h4 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
            <span class="text-2xl">üìä</span>
            <span>Score Submission & Verification</span>
          </h4>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            <li><strong>Both Teams Must Submit:</strong> Each team submits their score through their dashboard</li>
            <li><strong>Score Format:</strong> Enter as "6-4, 6-3" or "6-4, 3-6, 10-8" (your team's score first)</li>
            <li><strong>Automatic Verification:</strong> If both submissions match, match is instantly verified</li>
            <li><strong>Disputes:</strong> If scores don't match, admin will review and make final decision</li>
            <li><strong>Submit Immediately:</strong> Enter scores right after the match while fresh in memory</li>
          </ul>
        </div>

        <!-- Match Day Procedures -->
        <div class="bg-white p-4 rounded-lg shadow-sm">
          <h4 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
            <span class="text-2xl">üèüÔ∏è</span>
            <span>Match Day Procedures</span>
          </h4>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            <li><strong>Arrive 10 Minutes Early:</strong> Allow time for warm-up and court assignment</li>
            <li><strong>Bring Booking Confirmation:</strong> Show venue staff your confirmed booking details</li>
            <li><strong>Warm-Up:</strong> 5 minutes warm-up before starting the match</li>
            <li><strong>Equipment:</strong> Bring your own padel rackets and balls (or coordinate with opponent)</li>
            <li><strong>Keep Score:</strong> Both teams should track score throughout the match</li>
          </ul>
        </div>

        <!-- No-Shows & Walkovers -->
        <div class="bg-white p-4 rounded-lg shadow-sm">
          <h4 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
            <span class="text-2xl">‚è∞</span>
            <span>No-Shows & Walkovers</span>
          </h4>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            <li><strong>Grace Period:</strong> Wait 15 minutes past scheduled time before leaving</li>
            <li><strong>Report No-Show:</strong> Submit report through your team dashboard immediately</li>
            <li><strong>Evidence Required:</strong> Take photo of court booking, time-stamped message to opponent</li>
            <li><strong>Admin Review:</strong> Admin will verify and award walkover win if justified</li>
            <li><strong>Penalties:</strong> No-show teams may face rank penalties or disqualification</li>
          </ul>
        </div>

        <!-- Sportsmanship & Conduct -->
        <div class="bg-white p-4 rounded-lg shadow-sm">
          <h4 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
            <span class="text-2xl">ü§ù</span>
            <span>Sportsmanship & Conduct</span>
          </h4>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            <li><strong>Respect Opponents:</strong> Shake hands before and after the match</li>
            <li><strong>Fair Play:</strong> Call your own shots honestly, give benefit of doubt on close calls</li>
            <li><strong>Padel Etiquette:</strong> No coaching during points, respect opponent's concentration</li>
            <li><strong>Line Calls:</strong> If in doubt, replay the point</li>
            <li><strong>Disputes:</strong> Resolve calmly and respectfully, escalate to admin if needed</li>
            <li><strong>Venue Rules:</strong> Follow all venue-specific rules and regulations</li>
          </ul>
        </div>

        <!-- Contact & Communication -->
        <div class="bg-white p-4 rounded-lg shadow-sm">
          <h4 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
            <span class="text-2xl">üí¨</span>
            <span>Contact & Communication</span>
          </h4>
          <ul class="list-disc pl-6 space-y-2 text-gray-700">
            <li><strong>Team Dashboard:</strong> All opponent contact info available through your secure team page</li>
            <li><strong>WhatsApp Groups:</strong> Join division-specific groups for updates and coordination</li>
            <li><strong>Response Time:</strong> Respond to opponent messages within 24 hours</li>
            <li><strong>Professional Tone:</strong> Keep all communications respectful and professional</li>
            <li><strong>Admin Support:</strong> Contact admin if opponent is unresponsive or difficult to coordinate</li>
          </ul>
        </div>

        <!-- Score Examples -->
        <div class="bg-white p-4 rounded-lg shadow-sm">
          <h4 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
            <span class="text-2xl">üìù</span>
            <span>Score Entry Examples</span>
          </h4>
          <div class="space-y-3 text-gray-700">
            <div class="bg-green-50 p-3 rounded border-l-4 border-green-500">
              <p class="font-semibold text-green-800">‚úì Correct Format:</p>
              <ul class="list-disc pl-6 mt-2 space-y-1">
                <li>"6-4, 6-3" (You won 2-0 in sets)</li>
                <li>"6-4, 3-6, 10-8" (You won 2-1 with super tiebreak)</li>
                <li>"7-6, 6-4" (You won 2-0, first set tiebreak)</li>
              </ul>
            </div>
            <div class="bg-red-50 p-3 rounded border-l-4 border-red-500">
              <p class="font-semibold text-red-800">‚úó Incorrect Format:</p>
              <ul class="list-disc pl-6 mt-2 space-y-1">
                <li>"6-4" (Missing second set)</li>
                <li>"We won 2 sets to 1" (Use game scores, not set count)</li>
                <li>"6/4, 6/3" (Use dashes, not slashes)</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function toggleAccordion(section) {
  const content = document.getElementById(section + '-content');
  const icon = document.getElementById(section + '-icon');
  
  if (content.classList.contains('hidden')) {
    content.classList.remove('hidden');
    icon.classList.remove('rotate-[-90deg]');
    icon.classList.add('rotate-0');
  } else {
    content.classList.add('hidden');
    icon.classList.remove('rotate-0');
    icon.classList.add('rotate-[-90deg]');
  }
}
</script>
{% endblock %}
